/**
 *	Clans management common
 */
#Const Version		"2.2.0"
#Const ScriptName	"Libs/Nadeo/CMGame/Modes/Clans_Common.Script.txt"

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
// MARK: Libraries
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
#Include "TextLib" as TL
#Include "MathLib" as ML
#Include "ColorLib" as CL

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
// MARK: Structures
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
#Struct K_Team {
	Text Name;
	Vec3 Color;
	Vec3 ForegroundColor;
	Vec3 TrigramColor;
	Text Logo;
	Text Skin;
	Text SkinOptions;
	Text Trigram;
	Integer[] SimilarTeamsInColor; // similar in colors
}

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
// MARK: Constantes
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
//L16N [Clans] Name of a team. %1 will be replaced by the name of the team. e.g. "Team #1", "Team Red", ...
#Const C_Text_TeamName _("Team %1")

// /!\ If you add a new clan style, do not forget to add it in the array C_ClanStyles and the relatives functions in Clans_Server /!\
#Const C_ClanStyle_Default 0
#Const C_ClanStyle_Animals 1
#Const C_ClanStyle_Fruits 2
#Const C_ClanStyles [1, 2]

/**
 * Constant used in `Royal` and `RoyalStars` game modes.
 * The `SkinOptions` member must be set to "Prestige=Yes&Mode=Royal&Year=XXXX", while the `Skin` member must remain empty.
 * This configuration allows the C++ code to dynamically update the skin.
 * @see /trackmania-next/tmnext/-/issues/4828
 */
#Const C_Teams_Animals [
	1 => K_Team {
		Name = _("|Clan|Flamingo"),
		Color = <1., 0.4, 1.>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/flamingo.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Fla" corresponds to the 3 first letters of "Flamingo". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Flamingo|FLA"),
		SimilarTeamsInColor= [2]
	},
	2 => K_Team {
		Name = _("|Clan|Pig"),
		Color = <1., 0.4, 0.6>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <0., 0., 0.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/pig.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Pig" corresponds to the 3 first letters of "Pig". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Pig|PIG"),
		SimilarTeamsInColor= [1]
	},
	3 => K_Team {
		Name = _("|Clan|Clown Fish"),
		Color = <1., 0.4, 0.>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <0., 0., 0.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/clown_fish.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Clo" corresponds to the 3 first letters of "Clown Fish". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Clown Fish|CLO"),
		SimilarTeamsInColor= [4]
	},
	4 => K_Team {
		Name = _("|Clan|Fox"),
		Color = <1., 0.6, 0.>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <0., 0., 0.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/fox.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Fox" corresponds to the 3 first letters of "Fox". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Fox|FOX"),
		SimilarTeamsInColor= [3]
	},
	5 => K_Team {
		Name = _("|Clan|Octopus"),
		Color = <0.8, 0.2, 0.6>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/octopus.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Oct" corresponds to the 3 first letters of "Octopus". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Octopus|OCT"),
		SimilarTeamsInColor= [6]
	},
	6 => K_Team {
		Name = _("|Clan|Butterfly"),
		Color = <0.4, 0., 0.4>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/butterfly.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "But" corresponds to the 3 first letters of "Butterfly". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Butterfly|BUT"),
		SimilarTeamsInColor= [5]
	},
	7 => K_Team {
		Name = _("|Clan|Crocodile"),
		Color = <0.2, 0.6, 0.>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/crocodile.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Cro" corresponds to the 3 first letters of "Crocodile". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Crocodile|CRO"),
		SimilarTeamsInColor= [8]
	},
	8 => K_Team {
		Name = _("|Clan|Grasshopper"),
		Color = <0., 0.8, 0.>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/grasshopper.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Gra" corresponds to the 3 first letters of "Grasshopper". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Grasshopper|GRA"),
		SimilarTeamsInColor= [7]
	},
	9 => K_Team {
		Name = _("|Clan|Ladybug"),
		Color = <0.6, 0., 0.>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/ladybug.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Lad" corresponds to the 3 first letters of "Ladybug". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Ladybug|LAD"),
		SimilarTeamsInColor= [10]
	},
	10 => K_Team {
		Name = _("|Clan|Macaw Parrot"),
		Color = <1., 0., 0.>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <0., 0., 0.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/macaw_parrot.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Mac" corresponds to the 3 first letters of "Macaw Parrot". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Macaw Parrot|MAC"),
		SimilarTeamsInColor= [9]
	},
	11 => K_Team {
		Name = _("|Clan|Giraffe"),
		Color = <0.95, 0.75, 0.3>,
		ForegroundColor = <0., 0., 0.>,
		TrigramColor = <0., 0., 0.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/giraffe.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Gir" corresponds to the 3 first letters of "Giraffe". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Giraffe|GIR"),
		SimilarTeamsInColor= [12]
	},
	12 => K_Team {
		Name = _("|Clan|Bee"),
		Color = <1., 1., 0.>,
		ForegroundColor = <0., 0., 0.>,
		TrigramColor = <0., 0., 0.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/bee.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Bee" corresponds to the 3 first letters of "Bee". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Bee|BEE"),
		SimilarTeamsInColor= [11]
	},
	13 => K_Team {
		Name = _("|Clan|Dolphin"),
		Color = <0.2, 0.6, 1.>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/dolphin.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Dol" corresponds to the 3 first letters of "Dolphin". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Dolphin|DOL"),
		SimilarTeamsInColor= [14]
	},
	14 => K_Team {
		Name = _("|Clan|Peafowl"),
		Color = <0., 0., 1.>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <0., 0., 0.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/peafowl.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Pea" corresponds to the 3 first letters of "Peafowl". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Peafowl|PEA"),
		SimilarTeamsInColor= [13]
	},
	15 => K_Team {
		Name = _("|Clan|Kangaroo"),
		Color = <0.65, 0.29, 0.08>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/kangaroo.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Kan" corresponds to the 3 first letters of "Kangaroo". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Kangaroo|KAN"),
		SimilarTeamsInColor= [16]
	},
	16 => K_Team {
		Name = _("|Clan|Monkey"),
		Color = <0.4, 0.2, 0.>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/monkey.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Mon" corresponds to the 3 first letters of "Monkey". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Monkey|MON"),
		SimilarTeamsInColor= [15]
	},
	17 => K_Team {
		Name = _("|Clan|Panda"),
		Color = <0., 0., 0.>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <0., 0., 0.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/panda.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Pan" corresponds to the 3 first letters of "Panda". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Panda|PAN"),
		SimilarTeamsInColor= [18]
	},
	18 => K_Team {
		Name = _("|Clan|Zebra"),
		Color = <0., 0., 0.>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/zebra.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Zeb" corresponds to the 3 first letters of "Zebra". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Zebra|ZEB"),
		SimilarTeamsInColor= [17]
	},
	19 => K_Team {
		Name = _("|Clan|Rabbit"),
		Color = <0.8, 0.8, 0.8>,
		ForegroundColor = <0., 0., 0.>,
		TrigramColor = <0., 0., 0.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/rabbit.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Rab" corresponds to the 3 first letters of "Rabbit". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Rabbit|RAB"),
		SimilarTeamsInColor= [20]
	},
	20 => K_Team {
		Name = _("|Clan|Polar Bear"),
		Color = <1., 1., 1.>,
		ForegroundColor = <0., 0., 0.>,
		TrigramColor = <0., 0., 0.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Animals/polar_bear.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2023",
		//L16N "Pol" corresponds to the 3 first letters of "Polar Bear". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Polar Bear|POL"),
		SimilarTeamsInColor= [19]
	}
]

/**
 * Constant used in `Royal` and `RoyalStars` game modes.
 * The `SkinOptions` member must be set to "Prestige=Yes&Mode=Royal&Year=XXXX", while the `Skin` member must remain empty.
 * This configuration allows the C++ code to dynamically update the skin.
 * @see /trackmania-next/tmnext/-/issues/4828
 */
#Const C_Teams_Fruits [
	1 => K_Team {
		Name = _("|Clan|Apple"),
		Color = <0.102, 0.965, 0.>,
		ForegroundColor = <0., 0., 0.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/apple.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "App" corresponds to the 3 first letters of "Apple". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Apple|APP"),
		SimilarTeamsInColor= [2, 12]
	},
	2 => K_Team {
		Name = _("|Clan|Avocado"),
		Color = <0.718, 1., 0.447>,
		ForegroundColor = <0., 0., 0.>,
		TrigramColor = <0., 0., 0.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/avocado.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Avo" corresponds to the 3 first letters of "Avocado". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Avocado|AVO"),
		SimilarTeamsInColor= [1, 12]
	},
	3 => K_Team {
		Name = _("|Clan|Banana"),
		Color = <1., 0.827, 0.192>,
		ForegroundColor = <0., 0., 0.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/banana.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Ban" corresponds to the 3 first letters of "Banana". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Banana|BAN"),
		SimilarTeamsInColor= [14, 18]
	},
	4 => K_Team {
		Name = _("|Clan|Blackberry"),
		Color = <0.192, 0.133, 0.251>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/blackberry.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Bla" corresponds to the 3 first letters of "Blackberry". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Blackberry|BLA"),
		SimilarTeamsInColor= []
	},
	5 => K_Team {
		Name = _("|Clan|Blueberry"),
		Color = <0.216, 0.255, 0.714>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/blueberry.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Blu" corresponds to the 3 first letters of "Blueberry". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Blueberry|BLU"),
		SimilarTeamsInColor= []
	},
	6 => K_Team {
		Name = _("|Clan|Cherry"),
		Color = <0.776, 0., 0.298>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/cherry.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Che" corresponds to the 3 first letters of "Cherry". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Cherry|CHE"),
		SimilarTeamsInColor= [19, 20]
	},
	7 => K_Team {
		Name = _("|Clan|Coconut"),
		Color = <0.808, 0.529, 0.318>,
		ForegroundColor = <0., 0., 0.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/coconut.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Coc" corresponds to the 3 first letters of "Coconut". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Coconut|COC"),
		SimilarTeamsInColor= [8]
	},
	8 => K_Team {
		Name = _("|Clan|Date"),
		Color = <0.78, 0.329, 0.>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/date.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Dat" corresponds to the 3 first letters of "Date". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Date (fruit)|DAT"),
		SimilarTeamsInColor= [7]
	},
	9 => K_Team {
		Name = _("|Clan|Dragon Fruit"),
		Color = <0.973, 0.18, 0.576>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/dragon_fruit.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Dra" corresponds to the 3 first letters of "Dragon Fruit". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Dragon Fruit|DRA"),
		SimilarTeamsInColor= [13]
	},
	10 => K_Team {
		Name = _("|Clan|Fig"),
		Color = <0.486, 0.216, 0.635>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/fig.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Fig" corresponds to the 3 first letters of "Fig". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Fig|FIG"),
		SimilarTeamsInColor= [11]
	},
	11 => K_Team {
		Name = _("|Clan|Grape"),
		Color = <0.349, 0.129, 0.69>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/grape.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Gra" corresponds to the 3 first letters of "Grape". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Grape|GRA"),
		SimilarTeamsInColor= [10]
	},
	12 => K_Team {
		Name = _("|Clan|Kiwi"),
		Color = <0.69, 0.847, 0.>,
		ForegroundColor = <0., 0., 0.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/kiwi.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Kiw" corresponds to the 3 first letters of "Kiwi". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Kiwi|KIW"),
		SimilarTeamsInColor= [1, 2]
	},
	13 => K_Team {
		Name = _("|Clan|Litchi"),
		Color = <0.875, 0.392, 0.522>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/litchi.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Lit" corresponds to the 3 first letters of "Litchi". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Litchi|LIT"),
		SimilarTeamsInColor= [9]
	},
	14 => K_Team {
		Name = _("|Clan|Mango"),
		Color = <1., 0.765, 0.>,
		ForegroundColor = <0., 0., 0.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/mango.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Man" corresponds to the 3 first letters of "Mango". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Mango|MAN"),
		SimilarTeamsInColor= [3, 18]
	},
	15 => K_Team {
		Name = _("|Clan|Orange"),
		Color = <0.941, 0.357, 0.>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/orange.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Or" corresponds to the 3 first letters of "Orange". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Orange|ORA"),
		SimilarTeamsInColor= [16]
	},
	16 => K_Team {
		Name = _("|Clan|Papaya"),
		Color = <0.957, 0.545, 0.>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/papaya.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Pap" corresponds to the 3 first letters of "Papaya". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Papaya|PAP"),
		SimilarTeamsInColor= [15]
	},
	17 => K_Team {
		Name = _("|Clan|Peach"),
		Color = <1., 0.639, 0.549>,
		ForegroundColor = <0., 0., 0.>,
		TrigramColor = <0., 0., 0.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/peach.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Pea" corresponds to the 3 first letters of "Peach". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Peach|PEA"),
		SimilarTeamsInColor= []
	},
	18 => K_Team {
		Name = _("|Clan|Pineapple"),
		Color = <1., 0.843, 0.290>,
		ForegroundColor = <0., 0., 0.>,
		TrigramColor = <0., 0., 0.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/pineapple.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Pin" corresponds to the 3 first letters of "Pineapple". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Pineapple|PIN"),
		SimilarTeamsInColor= [3, 14]
	},
	19 => K_Team {
		Name = _("|Clan|Strawberry"),
		Color = <0.851, 0., 0.173>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/strawberry.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Str" corresponds to the 3 first letters of "Strawberry". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Strawberry|STR"),
		SimilarTeamsInColor= [6, 20]
	},
	20 => K_Team {
		Name = _("|Clan|Watermelon"),
		Color = <1., 0., 0.286>,
		ForegroundColor = <1., 1., 1.>,
		TrigramColor = <1., 1., 1.>,
		Logo = "file://Media/Manialinks/Nadeo/CMGame/Modes/Clans/Fruits/watermelon.dds",
		SkinOptions = "Prestige=Yes&Mode=Royal&Year=2024",
		//L16N "Wat" corresponds to the 3 first letters of "Watermelon". The translation must be 3 or less letters because it's displayed on the back of the car (as the trigram). Due to technical limitations, you can only use A-Z letters. If you cannot translate in your language, just keep the english translation.
		Trigram = _("|Watermelon|WAT"),
		SimilarTeamsInColor= [6, 19]
	}
]

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
// MARK: Functions
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
/// Get the teams existing in a clan style
K_Team[Integer] GetTeamsFromClanStyle(Integer _ClanStyle) {
	switch (_ClanStyle) {
		case C_ClanStyle_Animals: return C_Teams_Animals;
		case C_ClanStyle_Fruits: return C_Teams_Fruits;
	}
	return [];
}

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
/// Get the team associated to a clan number
CTeam GetTeam(CNod _Context, Integer _ClanNb) {
	switchtype (_Context) {
		case CMode: {
			declare CMode Mode = (_Context as CMode);
			if (Mode.Teams.existskey(_ClanNb - 1)) {
				return Mode.Teams[_ClanNb - 1];
			}
		}
		case CMlScriptIngame: {
			declare CMlScriptIngame MlScriptIngame = (_Context as CMlScriptIngame);
			if (MlScriptIngame.Teams.existskey(_ClanNb - 1)) {
				return MlScriptIngame.Teams[_ClanNb - 1];
			}
		}
		case CManiaAppPlaygroundCommon: {
			declare CManiaAppPlaygroundCommon ManiaAppPlaygroundCommon = (_Context as CManiaAppPlaygroundCommon);
			if (ManiaAppPlaygroundCommon.Playground.Teams.existskey(_ClanNb - 1)) {
				return ManiaAppPlaygroundCommon.Playground.Teams[_ClanNb - 1];
			}
		}
		case CServerPlugin: {
			declare CServerPlugin ServerPlugin = (_Context as CServerPlugin);
			if (ServerPlugin.Teams.existskey(_ClanNb - 1)) {
				return ServerPlugin.Teams[_ClanNb - 1];
			}
		}
		default: {
			assert(False, "Unsuported context: "^_Context);
		}
	}

	return Null;
}

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
/// Get the color of the given clan
Vec3 GetClanColor(Integer _ClanStyle, Integer _Clan) {
	declare K_Team[Integer] TeamsList = GetTeamsFromClanStyle(_ClanStyle);
	if (TeamsList.existskey(_Clan)) {
		return TeamsList[_Clan].Color;
	}

	declare CTeam Team <=> GetTeam(This, _Clan);
	if (Team != Null) {
		return Team.ColorPrimary;
	}

	declare Real Seed = 0.; // Between 0. and 1.
	declare Real G = 1.22074408460575947536;
	declare Real A1 = 1. / ML::Pow(G, 1.);
	declare Real A2 = 1. / ML::Pow(G, 2.);
	declare Real A3 = 1. / ML::Pow(G, 3.);
	declare Real Hue = ML::Mod(Seed + (A1 * _Clan), 0., 1.);  // Hue between 0. and 1.
	declare Real Saturation = 0.6 + (ML::Mod(Seed + (A2 * _Clan), 0., 1.) * 0.4); // Saturation between 0.6 and 1.
	declare Real Value = 0.6 + (ML::Mod(Seed + (A3 * _Clan), 0., 1.) * 0.4); // Value between 0.6 and 1.
	return CL::HsvToRgb(<Hue, Saturation, Value>);
}

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
/// Get the foreground color of the given clan
Vec3 GetClanForegroundColor(Integer _ClanStyle, Integer _Clan) {
	declare K_Team[Integer] TeamsList = GetTeamsFromClanStyle(_ClanStyle);

	if (TeamsList.existskey(_Clan)) {
		return TeamsList[_Clan].ForegroundColor;
	}

	return <1., 1., 1.>;
}

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
/// Get the name of the given clan
Text GetClanName(Integer _ClanStyle, Integer _Clan, Boolean _UseColor) {
	declare K_Team[Integer] TeamsList = GetTeamsFromClanStyle(_ClanStyle);
	if (TeamsList.existskey(_Clan)) {
		if (_UseColor) {
			return TL::Compose("$<$"^CL::RgbToHex3(GetClanColor(_ClanStyle, _Clan))^"%1$>", TeamsList[_Clan].Name);
		} else {
			return TeamsList[_Clan].Name;
		}
	}

	declare CTeam Team <=> GetTeam(This, _Clan);
	if (Team != Null) {
		if (_UseColor) return Team.ColorizedName;
		else return Team.Name;
	}

	if (_UseColor) return TL::Compose(C_Text_TeamName, "$<$"^CL::RgbToHex3(GetClanColor(_ClanStyle, _Clan))^"#"^_Clan^"$>");
	return TL::Compose(C_Text_TeamName, "#"^_Clan);
}
Text GetClanName(Integer _ClanStyle, Integer _Clan) {
	return GetClanName(_ClanStyle, _Clan, False);
}

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
/// Get the logo of the given clan
Text GetClanLogo(Integer _ClanStyle, Integer _Clan) {
	return GetTeamsFromClanStyle(_ClanStyle).get(_Clan, K_Team {}).Logo;
}

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
/// Get the skin of the given clan
Text GetClanSkin(Integer _ClanStyle, Integer _Clan) {
	return GetTeamsFromClanStyle(_ClanStyle).get(_Clan, K_Team {}).Skin;
}

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
/// Get the trigram of the given clan
Text GetClanTrigram(Integer _ClanStyle, Integer _Clan) {
	return GetTeamsFromClanStyle(_ClanStyle).get(_Clan, K_Team {}).Trigram;
}

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
/// Get the trigram color of the given clan
Vec3 GetClanTrigramColor(Integer _ClanStyle, Integer _Clan) {
	declare K_Team[Integer] TeamsList = GetTeamsFromClanStyle(_ClanStyle);

	if (TeamsList.existskey(_Clan)) {
		return TeamsList[_Clan].TrigramColor;
	}

	return <1., 1., 1.>;
}

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
/// Get the ids of the similar teams in color of the given clan
Integer[] GetClanSimilarTeamsInColor(Integer _ClanStyle, Integer _Clan) {
	return GetTeamsFromClanStyle(_ClanStyle).get(_Clan, K_Team {}).SimilarTeamsInColor;
}

// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ //
/// Get a list of distinct teams (in color)
Integer[] GetRandomDistinctTeams(Integer _ClanStyle, Integer _TeamsNb) {
	declare K_Team[Integer] TeamsList = GetTeamsFromClanStyle(_ClanStyle);
	declare Integer[] PossibleClans = [];
	declare Integer[] RandomClans = [];
	foreach (Clan => Team in TeamsList) {
		PossibleClans.add(Clan);
	}
	assert(_TeamsNb <= (PossibleClans.count), "The maximum number of clans in this style is "^(PossibleClans.count)^", you tried to use "^_TeamsNb^".");

	// Find _TeamsNb unique random clans
	while (RandomClans.count < _TeamsNb && PossibleClans.count > 0) {
		RandomClans.add(PossibleClans[ML::Rand(0, PossibleClans.count-1)]);
		PossibleClans.remove(RandomClans[RandomClans.count-1]);
		foreach (TeamId in GetClanSimilarTeamsInColor(_ClanStyle, RandomClans[RandomClans.count-1])) {
			PossibleClans.remove(TeamId);
		}
	}

	// Fallback if we do not find enough distinct clans
	if (RandomClans.count < _TeamsNb) {
		PossibleClans.clear();
		foreach (Clan => Team in TeamsList) {
			PossibleClans.add(Clan);
		}
		foreach (SelectedClan in RandomClans) {
			PossibleClans.remove(SelectedClan);
		}
		while (RandomClans.count < _TeamsNb && PossibleClans.count > 0) {
			RandomClans.add(PossibleClans[ML::Rand(0, PossibleClans.count-1)]);
			PossibleClans.remove(RandomClans[RandomClans.count-1]);
		}
	}

	return RandomClans;
}